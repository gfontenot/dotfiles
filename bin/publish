#!/usr/bin/env ruby
# 
# 
# publish
# 
# Created by Gordon Fontenot
# 
# useage: publish <path/to/file>
# 
# Designed to be used alongside the post command
# To use, when you are inside the root of your Jekyll website,
# invoke publish <path/to/draft> (usually drafts/post-title.md)
# The script will move the file to your _posts directory, and assign the
# current date per Jekyll specs.


require 'fileutils'
require 'date'

unless File.exists?('_site') && File.directory?('_site')
  puts "This does not appear to be a Jekyll site."
  exit
end

unless ARGV[0]
  puts "You need to tell me which file to publish!"
  exit
end

file = ARGV[0]

file_name = "#{Date.today.to_s}-#{file.split("/")[1]}"

FileUtils.mv(file, "_posts/#{file_name}")