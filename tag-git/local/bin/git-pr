#!/bin/sh
# Open a PR and copy the url to the clipboard

set -e

msg="/tmp/commitmsg"

git log --format="%h (%aN, %ar)%n%w(78,3,3)%s%n%+b" master..HEAD | sed 's/^/# /' > $msg
vim $msg
hub pull-request -m "$(sed '/^#/d' $msg)" | pbcopy
echo "copied: $(pbpaste)"
